! --- 1. SYSTEM IDENTITY ---
hostname {{ obj.name }}
!
! --- 2. STANDARD SERVICES (The "Drift" Generators) ---
! Your device likely lacks these, so they will show as "Missing" (Green)
service routing protocols model multi-agent
!
ip domain-lookup
ip name-server 1.1.1.1
ip name-server 8.8.8.8
!
ntp server 0.pool.ntp.org iburst
ntp server 1.pool.ntp.org
!
logging host 192.168.10.50
logging level informational
!
! --- 3. USER ACCESS ---
! This ensures a standard admin exists.
username admin privilege 15 secret admin
!
! --- 4. INTERFACES ---
! This loops through every interface Nautobot knows about.
! If Nautobot has "Ethernet1" but the switch config is missing the description, it drifts.
{% for interface in obj.interfaces.all() %}
interface {{ interface.name }}
   {% if interface.description %}
   description {{ interface.description }}
   {% else %}
   description COMPLIANCE_MANAGED_INTERFACE
   {% endif %}
   {% if interface.ip_addresses.all() %}
   no switchport
   {% for ip in interface.ip_addresses.all() %}
   ip address {{ ip.host }}/{{ ip.prefix_length }}
   {% endfor %}
   {% endif %}
!
{% endfor %}
!
! --- 5. MANAGEMENT API ---
management api http-commands
   protocol http
   no shutdown
!
! --- 6. LEGAL BANNER ---
! This will almost certainly trigger a drift alert.
banner login
################################################################
#        UNAUTHORIZED ACCESS TO THIS DEVICE IS PROHIBITED      #
#         Property of KeySpark Tech - Monitored System         #
################################################################
EOF
!
end
